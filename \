require 'json'
require 'discordrb'

class Trivia

  attr_accessor :bot

  def initialize()
    json = File.read('config.json')
    config = JSON.parse(json)

    @bot = Discordrb::Commands::CommandBot.new(
      token: config['token'],
      application_id: config['appid'],
      prefix: config['prefix'] 
    )
    @running = false
  end

  def start
    @running = true;
    #@bot.add_await(:stop, Discordrb::Events::MessageEvent) {|event|
    #  if event.content == config['prefix']+"trivia stop" && @running == true then
    #    @running = false
    #    "Stopping"
    #  end
    #}
    loop do
      input = gets.chomp
      print input
    end
  end

  def stop
    @running = false;
  end

end
